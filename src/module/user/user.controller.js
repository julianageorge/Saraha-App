import Router from "express";
import { deleteUser, getProfile, updatePassword, UploadProfilePic,UploadProfilePicCloud } from "./user.service.js";
import { fileUpload } from "../../utils/multer/multer.local.js";
import {fileUpload as fileUploadCloud} from "../../utils/multer/multer.cloud.js";
import { fileValidationMiddleware } from "../../middlewares/file.validation.middleware.js";
import { isAuthenticated } from "../../middlewares/auth.middleware.js";
import { isvalid } from "../../middlewares/validation.middlewares.js";
import { updatePasswordSchema } from "./user.validation.js";
const router =Router();
router.delete("/",isAuthenticated,deleteUser);
router.put("/update-password",isAuthenticated,isvalid(updatePasswordSchema),updatePassword);
router.post("/upload-profile-pic",isAuthenticated,fileUpload({folder:"profilepics",MxSizeMB:1}).single("ProfilePic"),fileValidationMiddleware(),UploadProfilePic);
router.post("/upload-profile-pic-cloud",isAuthenticated,fileUploadCloud().single("ProfilePic"),UploadProfilePicCloud);
router.get("/",isAuthenticated,getProfile);
export default router;